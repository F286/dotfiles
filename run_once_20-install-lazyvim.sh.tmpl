{{ if ne .chezmoi.os "windows" -}}
#!/usr/bin/env bash
set -e

# Install Neovim if missing
if ! command -v nvim >/dev/null 2>&1; then
    if command -v brew >/dev/null 2>&1; then
        brew install neovim
    elif command -v apt-get >/dev/null 2>&1; then
        sudo apt-get update
        sudo apt-get install -y neovim
    elif command -v pacman >/dev/null 2>&1; then
        sudo pacman --noconfirm -S neovim
    elif command -v dnf >/dev/null 2>&1; then
        sudo dnf install -y neovim
    else
        echo "No supported package manager found for Neovim installation."
    fi
fi

# Replace any existing configuration with LazyVim starter
NVIM_CONFIG_DIR="$HOME/.config/nvim"
if [ -d "$NVIM_CONFIG_DIR" ]; then
    rm -rf "$NVIM_CONFIG_DIR"
fi

git clone https://github.com/LazyVim/starter "$NVIM_CONFIG_DIR"
rm -rf "$NVIM_CONFIG_DIR/.git"
{{ end -}}
