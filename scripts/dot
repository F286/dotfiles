#!/usr/bin/env bash
set -euo pipefail

here="$(cd "$(dirname "$0")" && pwd)"
stowx="$here/stowx.sh"

cmd="apply"
if [ $# -gt 0 ]; then
  case "$1" in
    apply|update|restow|delete|diff) cmd="$1"; shift;;
  esac
fi

case "$cmd" in
  apply)  exec bash "$stowx" apply  --backup-conflicts "$@" ;;
  update) exec bash "$stowx" update --backup-conflicts "$@" ;;
  restow) exec bash "$stowx" restow --backup-conflicts "$@" ;;
  delete) exec bash "$stowx" delete "$@" ;;
  diff)   exec bash "$stowx" diff "$@" ;;
esac

