#!/usr/bin/env bash
{{- if eq .chezmoi.os "darwin" }}
set -euo pipefail

# Ensure Homebrew exists (skip if not)
if ! command -v brew >/dev/null 2>&1 ; then
  echo "[hammerspoon] Homebrew not found; skipping Hammerspoon install."
  exit 0
fi

# Install Hammerspoon if absent
if ! [[ -d "/Applications/Hammerspoon.app" ]] && ! brew list --cask hammerspoon >/dev/null 2>&1 ; then
  brew install --cask hammerspoon
fi

echo "[hammerspoon] If this is your first run, open Hammerspoon once and grant Accessibility permissions:"
echo "             System Settings → Privacy & Security → Accessibility → enable Hammerspoon."
{{- end }}
