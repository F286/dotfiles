{{- if eq .chezmoi.os "darwin" }}
#!/usr/bin/env bash
set -euo pipefail

# re-run when this line changes: v1

# Require Homebrew; skip gracefully if missing
if ! command -v brew >/dev/null 2>&1; then
  echo "[hammerspoon] Homebrew not found; skipping install."
  exit 0
fi

# Install Hammerspoon if not present
if ! brew list --cask hammerspoon >/dev/null 2>&1; then
  brew install --cask hammerspoon
fi

# Launch once (non-blocking) to trigger Accessibility prompt, if desired
open -g -a Hammerspoon || true
{{- end }}
