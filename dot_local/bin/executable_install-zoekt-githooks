#!/usr/bin/env bash
set -euo pipefail
CHROMIUM_SRC="${1:-${CHROMIUM_SRC:-}}"
[[ -d "$CHROMIUM_SRC" ]] || { echo "Give chromium src root"; exit 2; }
for g in $(find "$CHROMIUM_SRC" -type d -name .git); do
  h="$(dirname "$g")/.git/hooks"
  mkdir -p "$h"
  for x in post-commit post-merge post-checkout; do
    install -m 0755 "$HOME/.config/git/template/hooks/$x" "$h/$x"
  done
done
