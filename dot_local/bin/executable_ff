#!/usr/bin/env bash
# List files (safe-by-default): no hidden, respect .gitignore
# Usage: ff [path] [-H|--hidden] [-I|--ignored]
set -euo pipefail

hidden=
ignored=
path="."

while [[ $# -gt 0 ]]; do
  case "$1" in
    -H|--hidden)  hidden="--hidden" ;;
    -I|--ignored) ignored="--no-ignore --no-ignore-vcs" ;;
    *)            path="$1" ;;
  esac
  shift
done

if command -v fd >/dev/null 2>&1; then
  # fd defaults: no hidden, respect .gitignore
  exec fd . "$path" --type f --color never --strip-cwd-prefix ${hidden:+$hidden} ${ignored:+$ignored}
else
  # rg --files defaults: no hidden, respect .gitignore
  exec rg --files "$path" --color never ${hidden:+$hidden} ${ignored:+$ignored}
fi
