# shellcheck shell=bash

# Fast-exit for non-interactive shells
[[ $- != *i* ]] && return

# oh-my-zsh base
export ZSH="$HOME/.oh-my-zsh"
ZSH_THEME="robbyrussell"
plugins=(git)

# Startup speed: cache completions and disable compfix/update checks
export DISABLE_AUTO_UPDATE=true
export ZSH_DISABLE_COMPFIX=true
export ZSH_CACHE_DIR="${XDG_CACHE_HOME:-$HOME/.cache}/oh-my-zsh"
export ZSH_COMPDUMP="$ZSH_CACHE_DIR/.zcompdump-$HOST-$ZSH_VERSION"
mkdir -p "$ZSH_CACHE_DIR"
autoload -Uz compinit && compinit -C -d "$ZSH_COMPDUMP"
zstyle ':completion:*' use-cache on
zstyle ':completion:*' cache-path "$ZSH_CACHE_DIR"

source "$ZSH/oh-my-zsh.sh"

export PATH="$HOME/.local/bin:$PATH:/Users/freedebreuil/tools/depot_tools"

# Compile .zshrc for faster startup (uses compiled file if present)
if command -v zsh >/dev/null 2>&1 && whence -w zcompile >/dev/null 2>&1; then
  _zrc="$HOME/.zshrc"; _zwc="${_zrc}.zwc"
  if [[ ! -s "$_zwc" || "$_zrc" -nt "$_zwc" ]]; then
    zcompile -R -- "$_zwc" "$_zrc" 2>/dev/null || true
  fi
fi

# shellcheck source=/Users/freedebreuil/.config/shell/00-editor.sh
# shellcheck disable=SC1091
[ -f "/Users/freedebreuil/.config/shell/00-editor.sh" ] && . "/Users/freedebreuil/.config/shell/00-editor.sh"

# Load FZF theme if available
[ -f "$HOME/.config/fzf/tokyonight.zsh" ] && source "$HOME/.config/fzf/tokyonight.zsh"

# Tokyo Night Moon colors for FindItFaster
export BAT_THEME="tokyonight_night"
